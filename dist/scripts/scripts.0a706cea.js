"use strict";var app=angular.module("cupperApp",["firebase","ngCookies","ngResource","ngRoute","ngSanitize"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"PlayCtrl"}).when("/play/:gameId",{templateUrl:"views/play.html",controller:"PlayCtrl"}).otherwise({redirectTo:"/"})}]),app.constant("FIREBASE_URL","https://amber-torch-2724.firebaseio.com/"),app.controller("PlayCtrl",["$scope","$firebase","$location","$routeParams","Deck","User","FIREBASE_URL",function(a,b,c,d,e,f,g){a.deck=e.standardDeck;var h=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},i=new Firebase(g+"games/"+d.gameId),j=b(i);a.myDeck=j.$asArray();var k=new Firebase(g+"users/"+d.gameId),l=b(k);a.myUsers=l.$asArray(),a.user={username:""};var m=0;a.gameReady=!0,a.firstTurn=!1,a.gameStarted=!1,a.gameOver=!0,a.cardRule=!0,a.nextCard=function(){a.cardRule=!0,1===a.myDeck.length?(a.myDeck.$remove(0),a.gameOver=!1):52===a.myDeck.length&&0===m?(a.firstTurn=!1,a.gameStarted=!0,a.currentUser=a.myUsers[m],m++):(a.firstTurn=!1,a.gameStarted=!0,a.myDeck.$remove(0),m>a.myUsers.length-1&&(m=0),a.currentUser=a.myUsers[m],m++)},a.startGame=function(){e.create(h(a.deck)).then(function(a){c.path("/play/"+a.name())})},a.addUser=function(){a.myUsers.$add(a.user),a.user={username:""}},a.removeUser=function(b){a.myUsers.$remove(b)},a.showRule=function(){a.cardRule=a.cardRule?!1:!0},a.beginRound=function(){a.gameReady=!1,a.firstTurn=!0,a.currentUser=a.myUsers[0]}}]),app.factory("Deck",["$firebase","FIREBASE_URL",function(a,b){var c=new Firebase(b+"games"),d=a(c).$asArray();return{all:d,create:function(a){return d.$add(a)},standardDeck:[{suit:"Hearts ♥",value:"♥ King",rule:"Make a Rule! Everyone must abide by the rule throughout the game!",pic:"images/hearts-king.png"},{suit:"Hearts ♥",value:"♥ Queen",rule:"QuestionMaster! If anyone answers a question you ask, they must drink!",pic:"images/hearts-queen.png"},{suit:"Hearts ♥",value:"♥ Jack",rule:"ThumbMaster! When you put your thumb down, every player must also. Last one drinks!",pic:"images/hearts-jack.png"},{suit:"Hearts ♥",value:"♥ 10",rule:"10 is Category! Every player must name something that falls in the chosen category!",pic:"images/hearts-ten.png"},{suit:"Hearts ♥",value:"♥ 9",rule:"9 is Rhyme! Pick a word everyone must rhyme with!",pic:"images/hearts-nine.png"},{suit:"Hearts ♥",value:"♥ 8",rule:"8 is Mate! When you drink, your mate must drink!",pic:"images/hearts-eight.png"},{suit:"Hearts ♥",value:"♥ 7",rule:"7 is Heaven! Last one to throw their hands up drinks!",pic:"images/hearts-seven.png"},{suit:"Hearts ♥",value:"♥ 6",rule:"6 is chicks! All females drink",pic:"images/hearts-six.png"},{suit:"Hearts ♥",value:"♥ 5",rule:"5 is guys! All males drink",pic:"images/hearts-five.png"},{suit:"Hearts ♥",value:"♥ 4",rule:"4 is Floor! Last to touch the floor drinks!",pic:"images/hearts-four.png"},{suit:"Hearts ♥",value:"♥ 3",rule:"3 is Me! Take 3 sips.",pic:"images/hearts-three.png"},{suit:"Hearts ♥",value:"♥ 2",rule:"2 is You! Give 2 sips.",pic:"images/hearts-two.png"},{suit:"Hearts ♥",value:"♥ Ace",rule:"Waterfall! Ask the 2 players next to you a simple question to determine order.",pic:"images/hearts-ace.png"},{suit:"Diamonds ♦",value:"♦ King",rule:"Make a Rule! Everyone must abide by the rule throughout the game!",pic:"images/diamonds-king.png"},{suit:"Diamonds ♦",value:"♦ Queen",rule:"QuestionMaster! If anyone answers a question you ask, they must drink!",pic:"images/diamonds-queen.png"},{suit:"Diamonds ♦",value:"♦ Jack",rule:"ThumbMaster! When you put your thumb down, every player must also. Last one drinks!",pic:"images/diamonds-jack.png"},{suit:"Diamonds ♦",value:"♦ 10",rule:"10 is Category! Every player must name something that falls in the chosen category!",pic:"images/diamonds-ten.png"},{suit:"Diamonds ♦",value:"♦ 9",rule:"9 is Rhyme! Pick a word everyone must rhyme with!",pic:"images/diamonds-nine.png"},{suit:"Diamonds ♦",value:"♦ 8",rule:"8 is Mate! When you drink, your mate must drink!",pic:"images/diamonds-eight.png"},{suit:"Diamonds ♦",value:"♦ 7",rule:"7 is Heaven! Last one to throw their hands up drinks!",pic:"images/diamonds-seven.png"},{suit:"Diamonds ♦",value:"♦ 6",rule:"6 is chicks! All females drink",pic:"images/diamonds-six.png"},{suit:"Diamonds ♦",value:"♦ 5",rule:"5 is guys! All males drink",pic:"images/diamonds-five.png"},{suit:"Diamonds ♦",value:"♦ 4",rule:"4 is Floor! Last to touch the floor drinks!",pic:"images/diamonds-four.png"},{suit:"Diamonds ♦",value:"♦ 3",rule:"3 is Me! Take 3 sips.",pic:"images/diamonds-three.png"},{suit:"Diamonds ♦",value:"♦ 2",rule:"2 is You! Give 2 sips.",pic:"images/diamonds-two.png"},{suit:"Diamonds ♦",value:"♦ Ace",rule:"Waterfall! Ask the 2 players next to you a simple question to determine order.",pic:"images/diamonds-ace.png"},{suit:"Spades ♠",value:"♠ King",rule:"Make a Rule! Everyone must abide by the rule throughout the game!",pic:"images/spades-king.png"},{suit:"Spades ♠",value:"♠ Queen",rule:"QuestionMaster! If anyone answers a question you ask, they must drink!",pic:"images/spades-queen.png"},{suit:"Spades ♠",value:"♠ Jack",rule:"ThumbMaster! When you put your thumb down, every player must also. Last one drinks!",pic:"images/spades-jack.png"},{suit:"Spades ♠",value:"♠ 10",rule:"10 is Category! Every player must name something that falls in the chosen category!",pic:"images/spades-ten.png"},{suit:"Spades ♠",value:"♠ 9",rule:"9 is Rhyme! Pick a word everyone must rhyme with!",pic:"images/spades-nine.png"},{suit:"Spades ♠",value:"♠ 8",rule:"8 is Mate! When you drink, your mate must drink!",pic:"images/spades-eight.png"},{suit:"Spades ♠",value:"♠ 7",rule:"7 is Heaven! Last one to throw their hands up drinks!",pic:"images/spades-seven.png"},{suit:"Spades ♠",value:"♠ 6",rule:"6 is chicks! All females drink",pic:"images/spades-six.png"},{suit:"Spades ♠",value:"♠ 5",rule:"5 is guys! All males drink",pic:"images/spades-five.png"},{suit:"Spades ♠",value:"♠ 4",rule:"4 is Floor! Last to touch the floor drinks!",pic:"images/spades-four.png"},{suit:"Spades ♠",value:"♠ 3",rule:"3 is Me! Take 3 sips.",pic:"images/spades-three.png"},{suit:"Spades ♠",value:"♠ 2",rule:"2 is You! Give 2 sips.",pic:"images/spades-two.png"},{suit:"Spades ♠",value:"♠ Ace",rule:"Waterfall! Ask the 2 players next to you a simple question to determine order.",pic:"images/spades-ace.png"},{suit:"Clubs ♣",value:"King",rule:"Make a Rule! Everyone must abide by the rule throughout the game!",pic:"images/clubs-king.png"},{suit:"Clubs ♣",value:"♣ Queen",rule:"QuestionMaster! If anyone answers a question you ask, they must drink!",pic:"images/clubs-queen.png"},{suit:"Clubs ♣",value:"♣ Jack",rule:"ThumbMaster! When you put your thumb down, every player must also. Last one drinks!",pic:"images/clubs-jack.png"},{suit:"Clubs ♣",value:"♣ 10",rule:"10 is Category! Every player must name something that falls in the chosen category!",pic:"images/clubs-ten.png"},{suit:"Clubs ♣",value:"♣ 9",rule:"9 is Rhyme! Pick a word everyone must rhyme with!",pic:"images/clubs-nine.png"},{suit:"Clubs ♣",value:"♣ 8",rule:"8 is Mate! When you drink, your mate must drink!",pic:"images/clubs-eight.png"},{suit:"Clubs ♣",value:"♣ 7",rule:"7 is Heaven! Last one to throw their hands up drinks!",pic:"images/clubs-seven.png"},{suit:"Clubs ♣",value:"♣ 6",rule:"6 is chicks! All females drink",pic:"images/clubs-six.png"},{suit:"Clubs ♣",value:"♣ 5",rule:"5 is guys! All males drink",pic:"images/clubs-five.png"},{suit:"Clubs ♣",value:"♣ 4",rule:"4 is Floor! Last to touch the floor drinks!",pic:"images/clubs-four.png"},{suit:"Clubs ♣",value:"♣ 3",rule:"3 is Me! Take 3 sips.",pic:"images/clubs-three.png"},{suit:"Clubs ♣",value:"♣ 2",rule:"2 is You! Give 2 sips.",pic:"images/clubs-two.png"},{suit:"Clubs ♣",value:"♣ Ace",rule:"Waterfall! Ask the 2 players next to you a simple question to determine order.",pic:"images/clubs-ace.png"}]}}]),app.factory("User",["$firebase","FIREBASE_URL",function(a,b){var c=new Firebase(b+"users"),d=a(c).$asArray();return{all:d,create:function(a){return d.$add(a)},find:function(a,b){d.$loaded().then(function(){var c=d.filter(function(b){return b.gameId===a});return b&&b(c),c})},"delete":function(){}}}]);